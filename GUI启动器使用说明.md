# WritingHouse GUI启动器使用说明

## 📖 概述

WritingHouse GUI启动器是一个友好的可视化界面，用于管理WritingHouse项目的前后端服务。它提供了一键启动、停止、重启功能，并集成了实时日志显示，让您告别黑色命令行窗口！

## 🚀 快速开始

### 方式一：直接运行Python脚本
```bash
# 双击运行
start_gui.bat

# 或者直接运行Python脚本
python launcher_gui.py
```

### 方式二：使用可执行文件（推荐）
```bash
# 首先构建可执行文件
build_launcher.bat

# 然后运行
start_gui.bat
```

## 🎯 主要功能

### 1. 服务控制
- **🚀 启动服务**：一键启动前后端服务
- **⏹️ 停止服务**：安全停止所有服务
- **🔄 重启服务**：快速重启服务

### 2. 实时状态监控
- **服务状态显示**：实时显示前后端服务运行状态
- **快速访问链接**：直接打开前端页面和API文档
- **端口监控**：自动检测端口占用情况

### 3. 日志管理
- **实时日志显示**：在GUI中查看服务运行日志
- **日志级别标识**：不同颜色显示INFO、SUCCESS、ERROR、WARNING
- **自动滚动**：可选择是否自动滚动到最新日志
- **日志保存**：将日志保存到文件
- **日志清空**：一键清空当前日志

### 4. 环境检查
- **自动环境检测**：启动时自动检查Node.js、Python环境
- **项目文件验证**：检查前后端目录是否存在
- **依赖检查**：验证必要的依赖是否安装

## 🖥️ 界面介绍

### 主界面布局

```
┌─────────────────────────────────────────────────────────┐
│                WritingHouse 启动器                      │
├─────────────────────────────────────────────────────────┤
│  [🚀 启动服务]  [⏹️ 停止服务]  [🔄 重启服务]           │
├─────────────────────────────────────────────────────────┤
│  服务状态：                                             │
│  ● 前端服务: ⚫ 未运行  [🌐 打开前端]                   │
│  ● 后端服务: ⚫ 未运行  [📚 API文档]                    │
├─────────────────────────────────────────────────────────┤
│  实时日志：                    [💾 保存] [🗑️ 清空]      │
│  ┌─────────────────────────────────────────────────────┐ │
│  │ [INFO] 正在检查环境...                              │ │
│  │ [SUCCESS] Node.js 检查通过                         │ │
│  │ [SUCCESS] Python 检查通过                          │ │
│  │ [INFO] 正在启动后端服务...                          │ │
│  │ [SUCCESS] 后端服务启动成功 (端口: 8000)             │ │
│  │ [INFO] 正在启动前端服务...                          │ │
│  │ [SUCCESS] 前端服务启动成功 (端口: 5173)             │ │
│  └─────────────────────────────────────────────────────┘ │
│  ☑️ 自动滚动到底部                                      │
└─────────────────────────────────────────────────────────┘
```

### 按钮功能说明

#### 控制按钮
- **🚀 启动服务**: 启动前后端服务，按钮会变为禁用状态直到启动完成
- **⏹️ 停止服务**: 优雅地停止所有服务，确保数据安全
- **🔄 重启服务**: 先停止再启动，用于应用配置更改

#### 快捷链接
- **🌐 打开前端**: 在默认浏览器中打开前端页面 (http://localhost:5173)
- **📚 API文档**: 在默认浏览器中打开API文档 (http://localhost:8000/docs)

#### 日志操作
- **💾 保存日志**: 将当前日志保存到文件
- **🗑️ 清空日志**: 清空当前显示的日志内容
- **☑️ 自动滚动**: 勾选后自动滚动到最新日志

## 🎨 日志颜色说明

- **🔵 INFO**: 蓝色 - 一般信息
- **🟢 SUCCESS**: 绿色 - 成功操作
- **🟡 WARNING**: 黄色 - 警告信息
- **🔴 ERROR**: 红色 - 错误信息

## ⚙️ 配置选项

### 端口配置

启动器会自动检测以下默认端口：
- 前端服务: 5173
- 后端服务: 8000

如需修改端口，请编辑对应的配置文件。

### 自动启动选项

可以通过修改 `launcher_config.json` 文件来配置启动行为：

```json
{
  "auto_start_backend": true,
  "auto_start_frontend": true,
  "auto_scroll_logs": true,
  "log_level": "INFO",
  "frontend_port": 5173,
  "backend_port": 8000
}
```

## 🔧 构建可执行文件

### 使用PyInstaller构建

```bash
# 安装PyInstaller
pip install pyinstaller

# 构建可执行文件
build_launcher.bat
```

### 构建选项

`build_launcher.bat` 脚本包含以下构建选项：

```batch
pyinstaller --onefile --windowed --icon=icon.ico --name=WritingHouse-Launcher launcher_gui.py
```

- `--onefile`: 打包成单个可执行文件
- `--windowed`: 不显示控制台窗口
- `--icon`: 指定应用程序图标
- `--name`: 指定可执行文件名称

## 🐛 故障排除

### 常见问题

#### 1. GUI启动失败

**错误**: `ModuleNotFoundError: No module named 'tkinter'`

**解决方案**:
```bash
# Windows
pip install tk

# 或重新安装Python时勾选tkinter组件
```

#### 2. 服务启动失败

**错误**: 端口被占用

**解决方案**:
1. 使用GUI中的"停止服务"按钮
2. 或手动结束进程：
   ```cmd
   netstat -ano | findstr :5173
   taskkill /PID <PID> /F
   ```

#### 3. 日志显示异常

**错误**: 日志窗口无法滚动或显示乱码

**解决方案**:
1. 重启GUI启动器
2. 检查系统编码设置
3. 清空日志后重新启动服务

#### 4. 可执行文件构建失败

**错误**: PyInstaller构建过程中出错

**解决方案**:
```bash
# 清理缓存
pyinstaller --clean launcher_gui.spec

# 重新构建
build_launcher.bat
```

### 性能优化

#### 减少内存占用

1. **限制日志行数**: 修改代码中的 `MAX_LOG_LINES` 常量
2. **禁用自动滚动**: 取消勾选"自动滚动到底部"
3. **定期清空日志**: 使用"清空日志"按钮

#### 提高响应速度

1. **使用可执行文件**: 避免每次启动时加载Python解释器
2. **关闭不必要的功能**: 在配置文件中禁用不需要的监控功能

## 📋 更新日志

### v1.2.0
- ✨ 新增实时日志显示功能
- ✨ 新增日志保存和清空功能
- 🐛 修复服务状态检测问题
- 🎨 优化界面布局和颜色方案

### v1.1.0
- ✨ 新增快捷链接按钮
- ✨ 新增自动滚动选项
- 🐛 修复端口检测bug
- 📝 完善错误提示信息

### v1.0.0
- 🎉 首次发布
- ✨ 基本的启动、停止、重启功能
- ✨ 服务状态监控
- ✨ 环境检查功能

## 🤝 贡献指南

欢迎提交Issue和Pull Request来改进GUI启动器！

### 开发环境设置

```bash
# 克隆仓库
git clone <repository-url>

# 安装开发依赖
pip install -r requirements-dev.txt

# 运行测试
python -m pytest tests/
```

### 代码规范

- 使用PEP 8代码风格
- 添加适当的注释和文档字符串
- 编写单元测试

---

**感谢使用WritingHouse GUI启动器！** 🎉

如有问题或建议，请随时联系我们。