# 写作小屋 - 启动脚本使用说明

## 📋 脚本文件说明

本项目提供了多个启动脚本，方便您快速启动和停止写作小屋的前后端服务：

### 批处理脚本 (推荐Windows用户)
- **`start.bat`** - 一键启动前后端服务
- **`stop.bat`** - 一键停止所有服务

### PowerShell脚本 (功能更强大)
- **`start.ps1`** - PowerShell版启动脚本
- **`stop.ps1`** - PowerShell版停止脚本

## 🚀 快速开始

### 方法一：使用批处理脚本（推荐）

1. **启动服务**
   ```
   双击运行 start.bat
   ```
   或在命令行中执行：
   ```cmd
   start.bat
   ```

2. **停止服务**
   ```
   双击运行 stop.bat
   ```

### 方法二：使用PowerShell脚本

1. **启动服务**
   ```powershell
   .\start.ps1
   ```

2. **停止服务**
   ```powershell
   .\stop.ps1
   ```

> **注意**: 如果PowerShell执行策略限制，请先运行：
> ```powershell
> Set-ExecutionPolicy -ExecutionPolicy RemoteSigned -Scope CurrentUser
> ```

## 📊 服务信息

启动成功后，您可以通过以下地址访问服务：

- **前端界面**: http://localhost:5173
- **后端API**: http://localhost:8000
- **API文档**: http://localhost:8000/docs
- **ReDoc文档**: http://localhost:8000/redoc

## 🔧 环境要求

### 必需软件
- **Node.js** (版本 >= 16.0.0)
- **Python** (版本 >= 3.8)
- **npm** 或 **yarn** (Node.js包管理器)

### 可选软件
- **Git** (用于版本控制)
- **VS Code** (推荐的代码编辑器)

## 📝 详细步骤说明

### 首次运行

1. **环境检查**
   - 脚本会自动检查Node.js和Python是否已安装
   - 如果缺少必要环境，会提示下载链接

2. **依赖安装**
   - 前端：自动运行 `npm install` 安装依赖
   - 后端：创建虚拟环境并安装Python包

3. **服务启动**
   - 后端服务在8000端口启动
   - 前端服务在5173端口启动
   - 两个服务会在独立的命令行窗口中运行

### 后续运行

如果依赖已经安装，脚本会跳过安装步骤，直接启动服务，大大缩短启动时间。

## ⚠️ 常见问题

### 1. 端口被占用

**问题**: 提示端口5173或8000已被占用

**解决方案**:
```cmd
# 查看端口占用
netstat -ano | findstr :5173
netstat -ano | findstr :8000

# 结束占用进程（替换PID为实际进程ID）
taskkill /PID <PID> /F
```

### 2. Node.js版本过低

**问题**: 前端启动失败，提示Node.js版本不兼容

**解决方案**:
- 访问 https://nodejs.org/ 下载最新LTS版本
- 或使用nvm管理Node.js版本

### 3. Python虚拟环境问题

**问题**: 后端依赖安装失败

**解决方案**:
```cmd
# 删除现有虚拟环境
rmdir /s backend\venv

# 重新运行启动脚本
start.bat
```

### 4. 权限问题

**问题**: 脚本执行被阻止

**解决方案**:
- 右键点击脚本文件
- 选择"以管理员身份运行"

## 🛠️ 高级配置

### 修改端口

如需修改默认端口，请编辑以下文件：

**前端端口** (frontend/vite.config.ts):
```typescript
server: {
  port: 5173, // 修改为其他端口
  // ...
}
```

**后端端口** (backend/main.py):
```python
if __name__ == "__main__":
    import uvicorn
    uvicorn.run(
        "main:app",
        host="0.0.0.0",
        port=8000,  # 修改为其他端口
        reload=True
    )
```

### 生产环境部署

生产环境建议使用以下命令：

```cmd
# 构建前端
cd frontend
npm run build

# 启动后端（生产模式）
cd ../backend
venv\Scripts\activate.bat
uvicorn main:app --host 0.0.0.0 --port 8000
```

## 📞 技术支持

如果您在使用过程中遇到问题，请：

1. 查看本文档的常见问题部分
2. 检查命令行窗口中的错误信息
3. 提交Issue到项目仓库

---

**祝您使用愉快！** 🎉